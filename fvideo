#!/bin/sh

vid_dir="$HOME/Videos"
[ ! -d "$vid_dir" ] && exit 1

[ "$(command -V "notify-send")" ] && notify=1

[ -n "$VIDEO" ] && \
    player="$VIDEO" || player="xdg-open"

[ ! "$(command -V "$player")" ] || \
    [ ! "$(command -V "dm-dir")" ] && exit 1

sel_video="$(dm-dir "$vid_dir" "$1")"

if [ -n "$sel_video" ]; then
    [ "$notify" ] && notify-send "fvideo" "Opening $sel_video" 2>/dev/null &
    "$player" "$sel_video" 2>/dev/null &
    exit 0
else
    exit 1
fi
